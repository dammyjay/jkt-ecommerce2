<div class="profile-container">
  <h2>My Profile</h2>

  <% if (user.profile_image) { %>
    <img src="<%= user.profile_image %>" alt="Profile Picture" class="profile-pic">
  <% } else { %>
    <i class="fa fa-user-circle profile-icon-large"></i>
  <% } %>

  <p><strong>Full Name:</strong> <%= user.fullname %></p><br>
  <p><strong>Email:</strong> <%= user.email %></p><br>
  <p><strong>Phone:</strong> <%= user.phone || 'Not added' %></p><br>
  <p><strong>Address:</strong> <%= user.address || 'Not added' %></p><br>
  <p><strong>City:</strong> <%= user.city || 'Not added' %></p><br>
  <p><strong>State:</strong> <%= user.state || 'Not added' %></p><br>

  <button id="editBtn" class="btn-edit">Edit Profile</button>
</div>

<!-- Edit Profile Modal -->
<div id="editModal" class="modal">
  <div class="modal-content">
    <span id="closeModal">&times;</span>
    <h3>Edit Profile</h3>

    <form action="/users/profile" method="POST" enctype="multipart/form-data" class="profile-form">
      <label>Profile Image</label>
      <input type="file" name="profileImage" accept="image/*">

      <label>Full Name</label>
      <input type="text" name="fullname" value="<%= user.fullname %>" required>

      <label>Phone</label>
      <input type="text" name="phone" value="<%= user.phone || '' %>">

      <label>Address</label>
      <textarea name="address"><%= user.address || '' %></textarea>

      <label>City</label>
      <input type="text" name="city" value="<%= user.city || '' %>">

      <label>State</label>
      <input type="text" name="state" value="<%= user.state || '' %>">

      <button type="submit" class="btn-save">Save Changes</button>
    </form>
  </div>
</div>

<script>
  // Handle modal open/close
  const editBtn = document.getElementById('editBtn');
  const modal = document.getElementById('editModal');
  const closeModal = document.getElementById('closeModal');

  editBtn.addEventListener('click', () => {
    modal.style.display = 'flex';
  });

  closeModal.addEventListener('click', () => {
    modal.style.display = 'none';
  });

  window.addEventListener('click', (e) => {
    if (e.target === modal) {
      modal.style.display = 'none';
    }
  });
</script>
